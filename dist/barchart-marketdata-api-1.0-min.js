!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(t.Barchart||(t.Barchart={})).RealtimeData=e()}}(function(){return function e(t,r,n){function i(s,o){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!o&&u)return u(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){var r=t[s][1][e];return i(r?r:e)},l,l.exports,e,t,r,n)}return r[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){var n=e("./websocket/Connection");t.exports=function(){"use strict";return n}()},{"./websocket/Connection":10}],2:[function(e,t,r){var n=e("class.extend");t.exports=function(){"use strict";return n.extend({init:function(){},connect:function(e,t,r){this._connect(e,t,r)},_connect:function(e,t,r){},disconnect:function(){this._disconnect()},_disconnect:function(){},on:function(){this._on.apply(this,arguments)},_on:function(){},off:function(){this._off.apply(this,arguments)},_off:function(){},getMarketState:function(){return this._getMarketState()},_getMarketState:function(){return null},getActiveSymbolCount:function(){return this._getActiveSymbolCount()},_getActiveSymbolCount:function(){return null},getPassword:function(){return this._getPassword()},_getPassword:function(){return null},getUsername:function(){return this._getUsername()},_getUsername:function(){return null},toString:function(){return"[ConnectionBase]"}})}()},{"class.extend":44}],3:[function(e,t,r){var n=e("./http/HistoricalDataProvider");t.exports=function(){"use strict";return n}()},{"./http/HistoricalDataProvider":7}],4:[function(e,t,r){var n=e("class.extend");t.exports=function(){"use strict";return n.extend({init:function(){},getHistoricalData:function(e,t){return this._getHistoricalData(e,t)},_getHistoricalData:function(e,t){return null},toString:function(){return"[HistoricalDataProviderBase]"}})}()},{"class.extend":44}],5:[function(e,t,r){var n=e("./http/ProfileProvider");t.exports=function(){"use strict";return n}()},{"./http/ProfileProvider":8}],6:[function(e,t,r){var n=e("class.extend");t.exports=function(){"use strict";return n.extend({init:function(){},loadProfileData:function(e,t){return this._loadProfileData(e,t)},_loadProfileData:function(e,t){return null},toString:function(){return"[ProfileProviderBase]"}})}()},{"class.extend":44}],7:[function(e,t,r){var n=e("xhr"),i=e("./../../HistoricalDataProviderBase");t.exports=function(){"use strict";return i.extend({init:function(){},_getHistoricalData:function(e,t){var r="";for(var i in e)""!==r&&(r+="&"),r+=encodeURIComponent(i)+"="+encodeURIComponent(e[i]);var a={url:encodeURI("proxies/historicaldata/?"+r),method:"GET",json:!0};n(a,function(e,r,n){var i;i=e||200!==r.statusCode?[]:n,t(i)})},toString:function(){return"[HistoricalDataProvider]"}})}()},{"./../../HistoricalDataProviderBase":4,xhr:51}],8:[function(e,t,r){var n=e("xhr"),i=e("./../../ProfileProviderBase");t.exports=function(){"use strict";return i.extend({init:function(){},_loadProfileData:function(e,t){var r={url:"proxies/instruments/?lookup="+e.join(","),method:"GET",json:!0};n(r,function(e,r,n){var i;i=e||200!==r.statusCode?[]:n.instruments,t(i)})},toString:function(){return"[ProfileProvider]"}})}()},{"./../../ProfileProviderBase":6,xhr:51}],9:[function(e,t,r){var n=e("./Connection");t.exports=function(){"use strict";return n}()},{"./Connection":1}],10:[function(e,t,r){var n=e("barchart-marketdata-utilities"),i=e("./../../ConnectionBase"),a=e("./../../../marketState/MarketState"),s=e("./../../../messageParser/parseMessage");t.exports=function(){"use strict";var e=4,t=function(){function t(e,t){var r=O.pop();r?r.id==e?(r.symbols.push(t),O.push(r)):(O.push(r),O.push({id:e,symbols:[t]})):O.push({id:e,symbols:[t]})}function r(e,t){var r;switch(e){case"events":r=M.events;break;case"marketDepth":r=M.marketDepth[t.symbol];break;case"marketUpdate":r=M.marketUpdate[t.symbol];break;case"timestamp":r=M.timestamp}if(r)for(var n=0;n<r.length;n++){var i=r[n];i(t)}}function i(e,n,a){T||I!==!0&&(U.username=n,U.password=a,U.server=e,window.WebSocket?(k="DISCONNECTED",T=new WebSocket("wss://"+U.server+"/jerq"),T.onclose=function(e){console.warn(new Date+" connection closed."),T=null,"LOGGED_IN"==k&&(k="DISCONNECTED",r("events",{event:"disconnect"}),setTimeout(function(){T=null,i(U.server,U.username,U.password);var e=[];for(var r in C)e.push(r);for(var r in D)e.push(r);e.sort();for(var n=null,a=0;a<e.length;a++){var s=e[a];s!==n&&(t("MU_GO",s),n=s)}for(var o in x)t("MD_GO",o)},5e3))},T.onmessage=function(e){_.push(e.data)},T.onopen=function(e){console.log(new Date+" connection open.")}):console.warn("Websockets are not supported by this browser. Invoking refreshing quotes."))}function o(){k="DISCONNECTED",null!==T&&(T.send("LOGOUT\r\n"),T.close(),T=null),O=[],N=[],E=[],x={},C={},D={}}function u(t){if("DISCONNECTED"==k&&(k="CONNECTING"),"CONNECTING"==k)for(var n=t.split("\n"),i=0;i<n.length;i++)if("+++"==n[i])return k="LOGGING_IN",void N.push("LOGIN "+U.username+":"+U.password+" VERSION="+e+"\r\n");"LOGGING_IN"==k&&("+"==t.substr(0,1)?(k="LOGGED_IN",r("events",{event:"login success"})):"-"==t.substr(0,1)&&(o(),k="LOGIN_FAILED",r("events",{event:"login fail"}))),"LOGGED_IN"==k&&E.push(t)}function c(){return w}function l(){return U.password}function d(){return U.username}function f(){if(arguments.length<2)throw new Error("Bad number of arguments. Must pass in an eventId and handler.");var e,r=arguments[0],i=arguments[1];e=arguments.length>2?arguments[2]:null;var a=function(e){for(var t=(e||[]).slice(0),r=t.length-1;!(r<0);r--)t[r]===i&&t.splice(r,1);return t},s=function(e,t){for(var r=!1,n=0;n<t.length;n++)if(t[n].hasOwnProperty(e)){r=!0;break}return r},o=function(r,i,o,u,c){var l=e,d=n.symbolParser.getProducerSymbol(l),f=o[l]||[],m=a(f);if(o[l]=m,f.length>0&&0===m.length){delete o[l];var p=!0,v=!0,h=S[d]||[];if(s(l,c)||(p=!0),p){h=h.slice(0);for(var b=h.length-1;!(b<0);b--){var g=h[b];g===l?h.splice(b,1):s(g,[o])&&(v=!1)}S[d]=h}if(v){delete r[d];for(var b=0;b<u.length;b++)if(u[b][d]){v=!1;break}v&&t(i,d)}}};switch(r){case"events":M.events=a(M.events);break;case"marketDepth":if(arguments.length<3)throw new Error("Invalid arguments. Invoke as follows: off('marketDepth', handler, symbol)");o(x,"MD_STOP",M.marketDepth,[],[]);break;case"marketUpdate":if(arguments.length<3)throw new Error("Invalid arguments. Invoke as follows: off('marketUpdate', handler, symbol)");o(C,"MU_STOP",M.marketUpdate,[D],[M.cumulativeVolume]);break;case"cumulativeVolume":if(arguments.length<3)throw new Error("Invalid arguments. Invoke as follows: off('cumulativeVolume', handler, symbol)");o(D,"MU_STOP",M.cumulativeVolume,[C],[M.marketUpdate]),c().getCumulativeVolume(e,function(e){e.off("events",i)});break;case"timestamp":M.timestamp=a(M.timestamp)}}function m(){if(arguments.length<2)throw new Error("Bad number of arguments. Must pass in an eventId and handler.");var e,r=arguments[0],i=arguments[1];e=arguments.length>2?arguments[2]:null;var a=function(e){e=e||[];for(var t=!0,r=0;r<e.length;r++)if(e[r]===i){t=!1;break}var n;return t?(n=e.slice(0),n.push(i)):n=e,n},s=function(r,i,s,o){var u=e,c=n.symbolParser.getProducerSymbol(u);s[u]=a(s[u]);for(var l=!0,d=!0,f=S[c]||[],m=0;m<f.length;m++)if(f[m]===u){l=!1;break}if(l&&(f=f.slice(0),f.push(u),S[c]=f),!r[c]){r[c]=!0;for(var m=0;m<o.length;m++)if(o[m][c]){d=!1;break}d&&t(i,c)}};switch(r){case"events":M.events=a(M.events);break;case"marketDepth":if(arguments.length<3)throw new Error("Invalid arguments. Invoke as follows: on('marketDepth', handler, symbol)");s(x,"MD_GO",M.marketDepth,[]),c().getBook(e)&&i({type:"INIT",symbol:e});break;case"marketUpdate":if(arguments.length<3)throw new Error("Invalid arguments. Invoke as follows: on('marketUpdate', handler, symbol)");s(C,"MU_GO",M.marketUpdate,[D]),c().getQuote(e)&&i({type:"INIT",symbol:e});break;case"cumulativeVolume":if(arguments.length<3)throw new Error("Invalid arguments. Invoke as follows: on('cumulativeVolume', handler, symbol)");s(D,"MU_GO",M.cumulativeVolume,[C]),c().getCumulativeVolume(e,function(e){e.on("events",i)});break;case"timestamp":M.timestamp=a(M.timestamp)}}function p(e){switch(w.processMessage(e),e.type){case"BOOK":r("marketDepth",e);break;case"TIMESTAMP":r("timestamp",w.getTimestamp());break;default:r("marketUpdate",e)}}function v(e){var t;try{if(t=s(e),t.type)if(t.symbol){var r=S[t.symbol];if(r)for(var n=0;n<r.length;n++){var i,a=r[n];if(a===t.symbol)i=t;else{i={};for(var o in t)i[o]=t[o];i.symbol=a}p(i)}}else p(t);else console.log(e)}catch(u){console.error(u),console.log(t)}}function h(){for(var e=N.shift();e;)console.log(e),T.send(e),e=N.shift();setTimeout(h,200)}function b(){for(var e=!1,t=9;!e;){var r=E.shift();if(r){var n=!1,i=1,a=-1,s=r.indexOf(""),o=r.indexOf("\n");if(o>-1&&(s<0||o<s)?(a=o,i=2):s>-1&&(a=s),a>-1){var u=a+1;if(1==i&&(r.length<a+t+1?(E.length>0?E[0]=r+E[0]:(E.unshift(r),e=!0),n=!0):""==r.substr(a+1,1)&&(u+=t+1)),!n){var c=r.substring(0,u);2==i?c=c.trim():(a=c.indexOf(""),a>0&&(c=c.substring(a))),c.length>0&&v(c),r=r.substring(u),r.length>0&&(E.length>0?E[0]=r+E[0]:E.unshift(r))}}else r.length>0&&(E.length>0?E[0]=r+E[0]:(E.unshift(r),e=!0))}else e=!0;0===E.length&&(e=!0)}setTimeout(b,125)}function g(){for(var e=_.shift();e;)e&&u(e),e=_.shift();setTimeout(g,125)}function P(){if("LOGGED_IN"==k)for(;O.length>0;){var e=O.shift(),t="",r="";switch(e.id){case"MD_GO":t="GO",r="Bb";break;case"MU_GO":t="GO",r="Ssc";break;case"MD_STOP":t="STOP",r="Bb";break;case"MU_STOP":t="STOP",r="Ssc"}for(var n=t+" ",i=0;i<e.symbols.length;i++)i>0&&(n+=","),n+=e.symbols[i]+"="+r;N.push(n)}setTimeout(P,250)}function y(){var e={};for(var t in C)C[t]===!0&&(e[t]=!0);for(var t in x)x[t]===!0&&(e[t]=!0);for(var t in D)D[t]===!0&&(e[t]=!0);return Object.keys(e).length}var k="DISCONNECTED",I=!1,w=new a,T=null,S={},x={},C={},D={},O=[],N=[],E=[],_=[],M={events:[],marketDepth:{},marketUpdate:{},cumulativeVolume:{},timestamp:[]},U={username:null,password:null,server:null};return setTimeout(h,200),setTimeout(g,125),setTimeout(P,250),setTimeout(b,125),{connect:function(e,t,r){return I=!1,i(e,t,r),this},disconnect:function(){return I=!0,o(),this},getMarketState:c,getPassword:l,getUsername:d,off:f,on:m,getActiveSymbolCount:y}};return i.extend({init:function(){this._wrapppedConnection=new t},_connect:function(e,t,r){this._wrapppedConnection.connect(e,t,r)},_disconnect:function(){this._wrapppedConnection.disconnect()},_on:function(){this._wrapppedConnection.on.apply(this._wrapppedConnection,arguments)},_off:function(){this._wrapppedConnection.off.apply(this._wrapppedConnection,arguments)},_getMarketState:function(){return this._wrapppedConnection.getMarketState()},_getActiveSymbolCount:function(){return this._wrapppedConnection.getActiveSymbolCount()},_getPassword:function(){return this._wrapppedConnection.getPassword()},_getUsername:function(){return this._wrapppedConnection.getUsername()},toString:function(){return"[ConnectionBase]"}})}()},{"./../../../marketState/MarketState":14,"./../../../messageParser/parseMessage":19,"./../../ConnectionBase":2,"barchart-marketdata-utilities":35}],11:[function(e,t,r){var n=e("./../connection/HistoricalDataProvider");t.exports=function(){"use strict";return n}()},{"./../connection/HistoricalDataProvider":3}],12:[function(e,t,r){var n=e("./connection/index"),i=e("./historicalData/index"),a=e("./marketState/index"),s=e("./messageParser/index"),o=e("./util/index");t.exports=function(){"use strict";return{Connection:n,historicalData:i,HistoricalData:i,MarketState:a,MessageParser:s,messageParser:s,Util:o,util:o}}()},{"./connection/index":9,"./historicalData/index":11,"./marketState/index":17,"./messageParser/index":18,"./util/index":26}],13:[function(e,t,r){t.exports=function(){"use strict";var e="update",t="reset",r=function(e,r){this.symbol=e;var a=[],s={},o=null,u=null,c=function(e,t){return s[e]={price:t,volume:0}};this.on=function(e,t){if("events"===e){var r=a.indexOf(t);if(r<0){var i=a.slice(0);i.push(t),a=i;for(var s=this.toArray(),o=0;o<s;o++)n(this,t,s[o])}}},this.off=function(e,t){if("events"===e){var r=a.indexOf(t);if(!(r<0)){var n=a.slice(0);n.splice(r,1),a=n}}},this.getTickIncrement=function(){return r},this.getVolume=function(e){var t=e.toString(),r=s[t];return r?r.volume:0},this.incrementVolume=function(e,t){if(o&&u){if(e>o){for(var n=o+r;n<e;n+=r)i(this,a,c(n.toString(),n));o=e}else if(e<u){for(var n=u-r;n>e;n-=r)i(this,a,c(n.toString(),n));u=e}}else u=o=e;var l=e.toString(),d=s[l];d||(d=c(l,e)),d.volume+=t,i(this,a,d)},this.reset=function(){s={},o=null,u=null;for(var e=0;e<a.length;e++){var r=a[e];r({container:this,event:t})}},this.toArray=function(){var e=[];for(var t in s){var r=s[t];e.push({price:r.price,volume:r.volume})}return e.sort(function(e,t){return e.price-t.price}),e},this.dispose=function(){s={},o=null,u=null,a=[]}},n=function(t,r,n){try{r({container:t,event:e,price:n.price,volume:n.volume})}catch(i){console.error("An error was thrown by a cumulative volume observer.",i)}},i=function(e,t,r){for(var i=0;i<t.length;i++)n(e,t[i],r)};return r.clone=function(e,t){for(var n=new r(e,t.getTickIncrement()),i=t.toArray(),a=0;a<i.length;a++){var s=i[a];n.incrementVolume(s.price,s.volume)}return n},r}()},{}],14:[function(e,t,r){var n=e("barchart-marketdata-utilities"),i=e("./CumulativeVolume"),a=e("./Profile"),s=e("./Quote"),o=e("./../util/convertDayCodeToNumber"),u=e("./../connection/ProfileProvider");t.exports=function(){"use strict";var e=function(){var e,t={},r={},c={},l=new u,d=function(e,t){var r=function(e){for(var r=0;r<e.length;r++){var n=e[r];404!==n.status&&new a(n.lookup,n.symbol_description,n.exchange_channel,n.base_code.toString(),n.point_value,n.tick_increment)}t()};l.loadProfileData(e,r)},f=function(e){var r=t[e];if(!r){r={symbol:e,bids:[],asks:[]};var i=n.symbolParser.getProducerSymbol(e),a=t[i];a&&(r.bids=a.bids.slice(0),r.asks=a.asks.slice(0)),t[e]=r}return r},m=function(e){var t=c[e];if(!t){t={container:null,callbacks:[]};var r=n.symbolParser.getProducerSymbol(e),a=c[r];a&&a.container&&(t.container=i.clone(e,a.container)),c[e]=t}return t},p=function(e){var t=r[e];if(!t){var i=n.symbolParser.getProducerSymbol(e),a=r[i];t=a?s.clone(e,a):new s(e),r[e]=t}return t},v=function(e){var t=a.prototype.Profiles[e];if(!t){var r=n.symbolParser.getProducerSymbol(e),i=a.prototype.Profiles[r];i&&(t=new a(e,i.name,i.exchange,i.unitcode,i.pointValue,i.tickIncrement))}return t},h=function(t){var r=t.symbol;if("TIMESTAMP"==t.type)return void(e=t.timestamp);if("BOOK"==t.type){var n=f(r);return n.asks=t.asks,void(n.bids=t.bids)}if("REFRESH_CUMULATIVE_VOLUME"!=t.type){var s=v(r);if(!s&&"REFRESH_QUOTE"!=t.type)return console.warn("No profile found for "+r),void console.log(t);var u=p(r);if(!u.day&&t.day&&(u.day=t.day,u.dayNum=o(u.day)),u.day&&t.day){var l=o(t.day);if(l>u.dayNum||u.dayNum-l>5)u.day=t.day,u.dayNum=l,u.flag="p",u.bidPrice=0,u.bidSize=void 0,u.askPrice=void 0,u.askSize=void 0,u.settlementPrice?u.previousPrice=u.settlementPrice:u.lastPrice&&(u.previousPrice=u.lastPrice),u.lastPrice=void 0,u.tradePrice=void 0,u.tradeSize=void 0,u.numberOfTrades=void 0,u.openPrice=void 0,u.highPrice=void 0,u.lowPrice=void 0,u.volume=void 0;else if(u.dayNum>l)return;switch(t.type){case"HIGH":u.highPrice=t.value;break;case"LOW":u.lowPrice=t.value;break;case"OPEN":u.flag=void 0,u.openPrice=t.value,u.highPrice=t.value,u.lowPrice=t.value,u.lastPrice=t.value;var d=c[r];d&&d.container&&d.container.reset();break;case"OPEN_INTEREST":u.openInterest=t.value;break;case"REFRESH_DDF":switch(t.subrecord){case"1":case"2":case"3":u.message=t,null===t.openPrice?u.openPrice=void 0:t.openPrice&&(u.openPrice=t.openPrice),null===t.highPrice?u.highPrice=void 0:t.highPrice&&(u.highPrice=t.highPrice),null===t.lowPrice?u.lowPrice=void 0:t.lowPrice&&(u.lowPrice=t.lowPrice),null===t.lastPrice?u.lastPrice=void 0:t.lastPrice&&(u.lastPrice=t.lastPrice),null===t.bidPrice?u.bidPrice=void 0:t.bidPrice&&(u.bidPrice=t.bidPrice),null===t.askPrice?u.askPrice=void 0:t.askPrice&&(u.askPrice=t.askPrice),null===t.previousPrice?u.previousPrice=void 0:t.previousPrice&&(u.previousPrice=t.previousPrice),null===t.settlementPrice?(u.settlementPrice=void 0,"s"==u.flag&&(u.flag=void 0)):t.settlementPrice&&(u.settlementPrice=t.settlementPrice),null===t.volume?u.volume=void 0:t.volume&&(u.volume=t.volume),null===t.openInterest?u.openInterest=void 0:t.openInterest&&(u.openInterest=t.openInterest),"1"==t.subsrecord&&(u.lastUpdate=t.time)}break;case"REFRESH_QUOTE":s=new a(r,t.name,t.exchange,t.unitcode,t.pointValue,t.tickIncrement),u.message=t,u.flag=t.flag,u.mode=t.mode,u.lastUpdate=t.lastUpdate,u.bidPrice=t.bidPrice,u.bidSize=t.bidSize,u.askPrice=t.askPrice,u.askSize=t.askSize,u.lastPrice=t.lastPrice,u.tradeSize=t.tradeSize,u.numberOfTrades=t.numberOfTrades,u.previousPrice=t.previousPrice,u.settlementPrice=t.settlementPrice,u.openPrice=t.openPrice,u.highPrice=t.highPrice,u.lowPrice=t.lowPrice,u.volume=t.volume,u.openInterest=t.openInterest,t.tradeTime?u.time=t.tradeTime:t.timeStamp&&(u.time=t.timeStamp);break;case"SETTLEMENT":u.lastPrice=t.value,u.settlement=t.value,"D"==t.element&&(u.flag="s");break;case"TOB":u.bidPrice=t.bidPrice,u.bidSize=t.bidSize,u.askPrice=t.askPrice,u.askSize=t.askSize,t.time&&(u.time=t.time);break;case"TRADE":for(u.tradePrice=t.tradePrice,u.lastPrice=t.tradePrice,t.tradeSize&&(u.tradeSize=t.tradeSize,u.volume+=t.tradeSize),u.ticks.push({price:u.tradePrice,size:u.tradeSize});u.ticks.length>50;)u.ticks.shift();u.numberOfTrades||(u.numberOfTrades=0),u.numberOfTrades++,t.time&&(u.time=t.time),u.flag=void 0;var d=c[r];d&&d.container&&t.tradePrice&&t.tradeSize&&d.container.incrementVolume(u.tradePrice,u.tradeSize);break;case"TRADE_OUT_OF_SEQUENCE":t.tradeSize&&(u.volume+=t.tradeSize);var d=c[r];d&&d.container&&t.tradePrice&&t.tradeSize&&d.container.incrementVolume(u.tradePrice,u.tradeSize);break;case"VOLUME":u.volume=t.value;break;case"VOLUME_YESTERDAY":break;case"VWAP":u.vwap1=t.value;break;default:console.error("Unhandled Market Message:"),console.log(t)}}}else{var d=m(r),h=d.container;if(h)h.reset();else{d.container=h=new i(r,t.tickIncrement);for(var b=d.callbacks||[],g=0;g<b.length;g++){var P=b[g];P(h)}d.callbacks=null}for(var y=t.priceLevels,g=0;g<y.length;g++){var k=y[g];h.incrementVolume(k.price,k.volume)}}};return{getBook:function(e){return t[e]},getCumulativeVolume:function(e,t){var r=m(e);r.container?t(r.container):r.callbacks.push(t)},getProfile:function(e,t){var r=v(e);r?t(r):d([e],function(){r=a.prototype.Profiles[e],t(r)})},getQuote:function(e){return r[e]},getTimestamp:function(){return e},processMessage:h}};return e.CumulativeVolume=i,e.Profile=a,e.Quote=s,e}()},{"./../connection/ProfileProvider":5,"./../util/convertDayCodeToNumber":24,"./CumulativeVolume":13,"./Profile":15,"./Quote":16,"barchart-marketdata-utilities":35}],15:[function(e,t,r){var n=e("./../util/parseSymbolType"),i=e("./../util/priceFormatter");t.exports=function(){"use strict";var e=function(t,r,i,a,s,o){this.symbol=t,this.name=r,this.exchange=i,this.unitCode=a,this.pointValue=s,this.tickIncrement=o;var u=n(this.symbol);u&&"future"===u.type&&(this.root=u.root,this.month=u.month,this.year=u.year),e.prototype.Profiles[t]=this};return e.prototype.Profiles={},e.prototype.PriceFormatter=function(t,r,n){var a=i(t,r,n).format;e.prototype.formatPrice=function(e){return a(e,this.unitCode)}},e.prototype.PriceFormatter("-",!0),e}()},{"./../util/parseSymbolType":28,"./../util/priceFormatter":29}],16:[function(e,t,r){t.exports=function(){"use strict";var e=function(e){this.symbol=e||null,this.message=null,this.flag=null,this.mode=null,this.day=null,this.dayNum=0,this.session=null,this.lastUpdate=null,this.bidPrice=null,this.bidSize=null,this.askPrice=null,this.askSize=null,this.lastPrice=null,this.tradePrice=null,this.tradeSize=null,this.numberOfTrades=null,this.vwap1=null,this.vwap2=null,this.settlementPrice=null,this.openPrice=null,this.highPrice=null,this.lowPrice=null,this.volume=null,this.openInterest=null,this.previousPrice=null,this.time=null,this.ticks=[]};return e.clone=function(e,t){var r={};for(var n in t)r[n]=t[n];return r.symbol=e,r},e}()},{}],17:[function(e,t,r){var n=e("./MarketState");t.exports=function(){"use strict";return n}()},{"./MarketState":14}],18:[function(e,t,r){var n=e("./parseMessage"),i=e("./parseTimestamp"),a=e("./parseValue");t.exports=function(){"use strict";return{parseMessage:n,parseTimestamp:i,parseValue:a,Parse:n,ParseTimestamp:i,ParseValue:a}}()},{"./parseMessage":19,"./parseTimestamp":20,"./parseValue":21}],19:[function(e,t,r){var n=e("barchart-marketdata-utilities");t.exports=function(){"use strict";return n.messageParser}()},{"barchart-marketdata-utilities":35}],20:[function(e,t,r){var n=e("barchart-marketdata-utilities");t.exports=function(){"use strict";return n.timestampParser}()},{"barchart-marketdata-utilities":35}],21:[function(e,t,r){var n=e("barchart-marketdata-utilities");t.exports=function(){"use strict";return n.priceParser}()},{"barchart-marketdata-utilities":35}],22:[function(e,t,r){var n=e("barchart-marketdata-utilities");t.exports=function(){"use strict";return n.convert.baseCodeToUnitCode}()},{"barchart-marketdata-utilities":35}],23:[function(e,t,r){var n=e("barchart-marketdata-utilities");t.exports=function(){"use strict";return n.convert.dateToDayCode}()},{"barchart-marketdata-utilities":35}],24:[function(e,t,r){var n=e("barchart-marketdata-utilities");t.exports=function(){"use strict";return n.convert.dayCodeToNumber}()},{"barchart-marketdata-utilities":35}],25:[function(e,t,r){var n=e("barchart-marketdata-utilities");t.exports=function(){"use strict";return n.convert.unitCodeToBaseCode}()},{"barchart-marketdata-utilities":35}],26:[function(e,t,r){var n=e("./convertBaseCodeToUnitCode"),i=e("./convertDateToDayCode"),a=e("./convertDayCodeToNumber"),s=e("./convertUnitCodeToBaseCode"),o=e("./monthCodes"),u=e("./parseSymbolType"),c=e("./priceFormatter"),l=e("./timeFormatter");t.exports=function(){"use strict";return{convertBaseCodeToUnitCode:n,convertUnitCodeToBaseCode:s,convertDateToDayCode:i,convertDayCodeToNumber:a,monthCodes:o,parseSymbolType:u,BaseCode2UnitCode:n,DateToDayCode:i,DayCodeToNumber:a,MonthCodes:o,ParseSymbolType:u,PriceFormatter:c,TimeFormatter:l,UnitCode2BaseCode:s}}()},{"./convertBaseCodeToUnitCode":22,"./convertDateToDayCode":23,"./convertDayCodeToNumber":24,"./convertUnitCodeToBaseCode":25,"./monthCodes":27,"./parseSymbolType":28,"./priceFormatter":29,"./timeFormatter":30}],27:[function(e,t,r){var n=e("barchart-marketdata-utilities");t.exports=function(){"use strict";return n.monthCodes.getCodeToNameMap()}()},{"barchart-marketdata-utilities":35}],28:[function(e,t,r){var n=e("barchart-marketdata-utilities");t.exports=function(){"use strict";return n.symbolParser.parseInstrumentType}()},{"barchart-marketdata-utilities":35}],29:[function(e,t,r){var n=e("barchart-marketdata-utilities");t.exports=function(){"use strict";return n.priceFormatter}()},{"barchart-marketdata-utilities":35}],30:[function(e,t,r){var n=e("barchart-marketdata-utilities");t.exports=function(){"use strict";return n.timeFormatter}()},{"barchart-marketdata-utilities":35}],31:[function(e,t,r){var n=e("class.extend");t.exports=function(){"use strict";return n.extend({init:function(){},parse:function(e){if("string"!=typeof e)throw new Error('The "textDocument" argument must be a string.');return this._parse(e)},_parse:function(e){return null},toString:function(){return"[XmlDomParserBase]"}})}()},{"class.extend":44}],32:[function(e,t,r){var n=e("./../XmlDomParserBase");t.exports=function(){"use strict";return n.extend({init:function(){window.DOMParser?this._xmlDomParser=new DOMParser:this._xmlDomParser=null},_parse:function(e){var t;return this._xmlDomParser?t=this._xmlDomParser.parseFromString(e,"text/xml"):(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)),t},toString:function(){return"[XmlDomParser]"}})}()},{"./../XmlDomParserBase":31}],33:[function(e,t,r){t.exports=function(){"use strict";return{unitCodeToBaseCode:function(e){switch(e){case"2":return-1;case"3":return-2;case"4":return-3;case"5":return-4;case"6":return-5;case"7":return-6;case"8":return 0;case"9":return 1;case"A":return 2;case"B":return 3;case"C":return 4;case"D":return 5;case"E":return 6;case"F":return 7;default:return 0}},baseCodeToUnitCode:function(e){switch(e){case-1:return"2";case-2:return"3";case-3:return"4";case-4:return"5";case-5:return"6";case-6:return"7";case 0:return"8";case 1:return"9";case 2:return"A";case 3:return"B";case 4:return"C";case 5:return"D";case 6:return"E";case 7:return"F";default:return 0}},dateToDayCode:function(e){var t=e.getDate();return t>=1&&t<=9?String.fromCharCode("1".charCodeAt(0)+t-1):10==t?"0":String.fromCharCode("A".charCodeAt(0)+t-11)},dayCodeToNumber:function(e){var t=parseInt(e,31);return t>9?t++:0===t&&(t=10),t}}}()},{}],34:[function(e,t,r){var n=e("lodash.isnan");t.exports=function(){"use strict";return function(e,t,r,i){if(""===e||void 0===e||null===e||n(e))return"";var a=e<0&&i===!0;a&&(e=0-e);var s=e.toFixed(t);if(!r||e>-1e3&&e<1e3)a&&(s="("+s+")");else{for(var o=s.length,u=e<0,c=0===t,l=0,d=[],f=o-1;!(f<0);f--){3!==l||u&&0===f||(d.unshift(r),l=0);var m=s.charAt(f);d.unshift(m),c?l+=1:"."===m&&(c=!0)}a&&(d.unshift("("),d.push(")")),s=d.join("")}return s}}()},{"lodash.isnan":48}],35:[function(e,t,r){var n=e("./convert"),i=e("./decimalFormatter"),a=e("./messageParser"),s=e("./monthCodes"),o=e("./priceFormatter"),u=e("./symbolFormatter"),c=e("./symbolParser"),l=e("./priceParser"),d=e("./timeFormatter"),f=e("./timestampParser");t.exports=function(){"use strict";return{convert:n,decimalFormatter:i,monthCodes:s,messageParser:a,priceFormatter:o,symbolParser:c,priceParser:l,symbolFormatter:u,timeFormatter:d,timestampParser:f}}()},{"./convert":33,"./decimalFormatter":34,"./messageParser":36,"./monthCodes":37,"./priceFormatter":38,"./priceParser":39,"./symbolFormatter":40,"./symbolParser":41,"./timeFormatter":42,"./timestampParser":43}],36:[function(e,t,r){var n=e("./common/xml/XmlDomParser"),i=e("./priceParser"),a=e("./timestampParser");t.exports=function(){"use strict";return function(e){var t={message:e,type:null};switch(e.substr(0,1)){case"%":var r;try{var s=new n;r=s.parse(e.substring(1))}catch(o){r=void 0}if(r){var u=r.firstChild;switch(u.nodeName){case"BOOK":t.symbol=u.attributes.getNamedItem("symbol").value,t.unitcode=u.attributes.getNamedItem("basecode").value,t.askDepth=parseInt(u.attributes.getNamedItem("bidcount").value),t.bidDepth=parseInt(u.attributes.getNamedItem("bidcount").value),t.asks=[],t.bids=[];var c,l;if(u.attributes.getNamedItem("askprices")&&u.attributes.getNamedItem("asksizes")){c=u.attributes.getNamedItem("askprices").value.split(","),l=u.attributes.getNamedItem("asksizes").value.split(",");for(var d=0;d<c.length;d++)t.asks.push({price:i(c[d],t.unitcode),size:parseInt(l[d])})}if(u.attributes.getNamedItem("bidprices")&&u.attributes.getNamedItem("bidsizes")){c=u.attributes.getNamedItem("bidprices").value.split(","),l=u.attributes.getNamedItem("bidsizes").value.split(",");for(var d=0;d<c.length;d++)t.bids.push({price:i(c[d],t.unitcode),size:parseInt(l[d])})}t.type="BOOK";break;case"QUOTE":for(var d=0;d<u.attributes.length;d++){switch(u.attributes[d].name){case"symbol":t.symbol=u.attributes[d].value;break;case"name":t.name=u.attributes[d].value;break;case"exchange":t.exchange=u.attributes[d].value;break;case"basecode":t.unitcode=u.attributes[d].value;break;case"pointvalue":t.pointValue=parseFloat(u.attributes[d].value);break;case"tickincrement":t.tickIncrement=parseInt(u.attributes[d].value);break;case"flag":t.flag=u.attributes[d].value;break;case"lastupdate":var f=u.attributes[d].value;t.lastUpdate=new Date(parseInt(f.substr(0,4)),parseInt(f.substr(4,2))-1,parseInt(f.substr(6,2)),parseInt(f.substr(8,2)),parseInt(f.substr(10,2)),parseInt(f.substr(12,2)));break;case"bid":t.bidPrice=i(u.attributes[d].value,t.unitcode);break;case"bidsize":t.bidSize=parseInt(u.attributes[d].value);break;case"ask":t.askPrice=i(u.attributes[d].value,t.unitcode);break;case"asksize":t.askSize=parseInt(u.attributes[d].value);break;case"mode":t.mode=u.attributes[d].value}for(var m={},p=0;p<u.childNodes.length;p++)if("SESSION"==u.childNodes[p].nodeName){var v={},h=u.childNodes[p].attributes;if(h.getNamedItem("id")&&(v.id=h.getNamedItem("id").value),h.getNamedItem("day")&&(v.day=h.getNamedItem("day").value),h.getNamedItem("last")&&(v.lastPrice=i(h.getNamedItem("last").value,t.unitcode)),h.getNamedItem("previous")&&(v.previousPrice=i(h.getNamedItem("previous").value,t.unitcode)),h.getNamedItem("open")&&(v.openPrice=i(h.getNamedItem("open").value,t.unitcode)),h.getNamedItem("high")&&(v.highPrice=i(h.getNamedItem("high").value,t.unitcode)),h.getNamedItem("low")&&(v.lowPrice=i(h.getNamedItem("low").value,t.unitcode)),h.getNamedItem("tradesize")&&(v.tradeSize=parseInt(h.getNamedItem("tradesize").value)),h.getNamedItem("numtrades")&&(v.numberOfTrades=parseInt(h.getNamedItem("numtrades").value)),h.getNamedItem("settlement")&&(v.settlementPrice=i(h.getNamedItem("settlement").value,t.unitcode)),h.getNamedItem("volume")&&(v.volume=parseInt(h.getNamedItem("volume").value)),h.getNamedItem("openinterest")&&(v.openInterest=parseInt(h.getNamedItem("openinterest").value)),h.getNamedItem("timestamp")){var f=h.getNamedItem("timestamp").value;v.timeStamp=new Date(parseInt(f.substr(0,4)),parseInt(f.substr(4,2))-1,parseInt(f.substr(6,2)),parseInt(f.substr(8,2)),parseInt(f.substr(10,2)),parseInt(f.substr(12,2)))}if(h.getNamedItem("tradetime")){var f=h.getNamedItem("tradetime").value;v.tradeTime=new Date(parseInt(f.substr(0,4)),parseInt(f.substr(4,2))-1,parseInt(f.substr(6,2)),parseInt(f.substr(8,2)),parseInt(f.substr(10,2)),parseInt(f.substr(12,2)))}v.id&&(m[v.id]=v)}var b="undefined"==typeof m.combined.lastPrice,g=!b&&"undefined"!=typeof m.combined.settlementPrice,P=b?m.previous:m.combined;P.lastPrice&&(t.lastPrice=P.lastPrice),P.previousPrice&&(t.previousPrice=P.previousPrice),P.openPrice&&(t.openPrice=P.openPrice),P.highPrice&&(t.highPrice=P.highPrice),P.lowPrice&&(t.lowPrice=P.lowPrice),P.tradeSize&&(t.tradeSize=P.tradeSize),P.numberOfTrades&&(t.numberOfTrades=P.numberOfTrades),P.settlementPrice&&(t.settlementPrice=P.settlementPrice),P.volume&&(t.volume=P.volume),P.openInterest&&(t.openInterest=P.openInterest),"combined"===P.id&&m.previous.openInterest&&(t.openInterest=m.previous.openInterest),P.timeStamp&&(t.timeStamp=P.timeStamp),P.tradeTime&&(t.tradeTime=P.tradeTime),m.combined.day&&(t.day=m.combined.day),b&&"undefined"==typeof t.flag&&(t.flag="p");var y=m.previous;if(t.previousPreviousPrice=y.previousPrice,t.previousSettlementPrice=y.settlementPrice,t.previousOpenPrice=y.openPrice,t.previousHighPrice=y.highPrice,t.previousLowPrice=y.lowPrice,t.previousTimeStamp=y.timeStamp,m.combined.day){var k="session_"+m.combined.day+"_T";if(m.hasOwnProperty(k)){var I=m[k],w=I.lastPrice;if(w){t.lastPriceT=w;var T=I.tradeTime,S=I.tradeSize;if(T){var x=new Date(T.getFullYear(),T.getMonth(),T.getDate(),12,0,0,0);t.sessionT=T.getTime()>x.getTime()}(b||g)&&(t.session="T",T&&(t.tradeTime=T),S&&(t.tradeSize=S),b&&(I.volume&&(t.volume=I.volume),I.previousPrice&&(t.previousPrice=I.previousPrice)))}}}}t.type="REFRESH_QUOTE";break;case"CV":t.type="REFRESH_CUMULATIVE_VOLUME",t.symbol=u.attributes.getNamedItem("symbol").value,t.unitCode=u.attributes.getNamedItem("basecode").value,t.tickIncrement=i(u.attributes.getNamedItem("tickincrement").value,t.unitCode);var C=u.attributes.getNamedItem("data");if(C){for(var D=C.value||"",O=D.split(":"),d=0;d<O.length;d++){var N=O[d],E=N.split(",");O[d]={price:i(E[0],t.unitCode),volume:parseInt(E[1])}}O.sort(function(e,t){return e.price-t.price}),t.priceLevels=O;
}else t.priceLevels=[];break;default:console.log(e)}}break;case"":switch(e.substr(1,1)){case"#":t.type="TIMESTAMP",t.timestamp=new Date(parseInt(e.substr(2,4)),parseInt(e.substr(6,2))-1,parseInt(e.substr(8,2)),parseInt(e.substr(10,2)),parseInt(e.substr(12,2)),parseInt(e.substr(14,2)));break;case"2":t.record="2";var _=e.indexOf(",",0);switch(t.symbol=e.substring(2,_),t.subrecord=e.substr(_+1,1),t.unitcode=e.substr(_+3,1),t.exchange=e.substr(_+4,1),t.delay=parseInt(e.substr(_+5,2)),t.subrecord){case"0":var M=e.indexOf(",",_+7);switch(t.value=i(e.substring(_+7,M),t.unitcode),t.element=e.substr(M+1,1),t.modifier=e.substr(M+2,1),t.element){case"A":t.type="OPEN";break;case"C":"1"==t.modifier&&(t.type="OPEN_INTEREST");break;case"D":case"d":"0"==t.modifier&&(t.type="SETTLEMENT");break;case"V":"0"==t.modifier&&(t.type="VWAP");break;case"0":"0"==t.modifier&&(t.tradePrice=t.value,t.type="TRADE");break;case"5":t.type="HIGH";break;case"6":t.type="LOW";break;case"7":"1"==t.modifier?t.type="VOLUME_YESTERDAY":"6"==t.modifier&&(t.type="VOLUME")}t.day=e.substr(M+3,1),t.session=e.substr(M+4,1),t.time=a(e.substr(e.indexOf("")+1,9));break;case"1":case"2":case"3":case"4":var U=e.substring(_+8).split(",");t.openPrice=i(U[0],t.unitcode),t.highPrice=i(U[1],t.unitcode),t.lowPrice=i(U[2],t.unitcode),t.lastPrice=i(U[3],t.unitcode),t.bidPrice=i(U[4],t.unitcode),t.askPrice=i(U[5],t.unitcode),t.previousPrice=i(U[7],t.unitcode),t.settlementPrice=i(U[10],t.unitcode),t.volume=U[13].length>0?parseInt(U[13]):void 0,t.openInterest=U[12].length>0?parseInt(U[12]):void 0,t.day=U[14].substr(0,1),t.session=U[14].substr(1,1),t.time=a(e.substr(e.indexOf("")+1,9)),t.type="REFRESH_DDF";break;case"7":var M=e.indexOf(",",_+7);t.tradePrice=i(e.substring(_+7,M),t.unitcode),_=M+1,M=e.indexOf(",",_),t.tradeSize=parseInt(e.substring(_,M)),_=M+1,t.day=e.substr(_,1),t.session=e.substr(_+1,1),t.time=a(e.substr(e.indexOf("")+1,9)),t.type="TRADE";break;case"8":var M=e.indexOf(",",_+7);t.bidPrice=i(e.substring(_+7,M),t.unitcode),_=M+1,M=e.indexOf(",",_),t.bidSize=parseInt(e.substring(_,M)),_=M+1,M=e.indexOf(",",_),t.askPrice=i(e.substring(_,M),t.unitcode),_=M+1,M=e.indexOf(",",_),t.askSize=parseInt(e.substring(_,M)),_=M+1,t.day=e.substr(_,1),t.session=e.substr(_+1,1),t.time=a(e.substr(e.indexOf("")+1,9)),t.type="TOB";break;case"Z":var M=e.indexOf(",",_+7);t.tradePrice=i(e.substring(_+7,M),t.unitcode),_=M+1,M=e.indexOf(",",_),t.tradeSize=parseInt(e.substring(_,M)),_=M+1,t.day=e.substr(_,1),t.session=e.substr(_+1,1),t.time=a(e.substr(e.indexOf("")+1,9)),t.type="TRADE_OUT_OF_SEQUENCE"}break;case"3":var _=e.indexOf(",",0);switch(t.symbol=e.substring(2,_),t.subrecord=e.substr(_+1,1),t.subrecord){case"B":t.unitcode=e.substr(_+3,1),t.exchange=e.substr(_+4,1),t.bidDepth="A"==e.substr(_+5,1)?10:parseInt(e.substr(_+5,1)),t.askDepth="A"==e.substr(_+6,1)?10:parseInt(e.substr(_+6,1)),t.bids=[],t.asks=[];for(var U=e.substring(_+8).split(","),d=0;d<U.length;d++){var l=U[d].split(/[A-Z]/),A=U[d].substr(l[0].length,1);A<="J"?t.asks.push({price:i(l[0],t.unitcode),size:parseInt(l[1])}):t.bids.push({price:i(l[0],t.unitcode),size:parseInt(l[1])})}t.type="BOOK"}break;default:t.type="UNKNOWN"}}return t}}()},{"./common/xml/XmlDomParser":32,"./priceParser":39,"./timestampParser":43}],37:[function(e,t,r){t.exports=function(){"use strict";var e={},t={},r=function(r,n,i){e[r]=n,t[r]=i};return r("F","January",1),r("G","February",2),r("H","March",3),r("J","April",4),r("K","May",5),r("M","June",6),r("N","July",7),r("Q","August",8),r("U","September",9),r("V","October",10),r("X","November",11),r("Z","December",12),r("Y","Cash",0),{getCodeToNameMap:function(){return e},getCodeToNumberMap:function(){return t}}}()},{}],38:[function(e,t,r){var n=e("lodash.isnan"),i=e("./decimalFormatter");t.exports=function(){"use strict";function e(e,t){return["000",Math.floor(e)].join("").substr(-1*t)}return function(t,r,a,s){function o(e){var r=Math.floor(e);return 0===r&&""===t?"":r}function u(e,t){return i(e,t,a,s)}var c;return c="."===t?function(e,t){switch(t){case"2":return u(e,3);case"3":return u(e,4);case"4":return u(e,5);case"5":return u(e,6);case"6":return u(e,7);case"7":return u(e,8);case"8":return u(e,0);case"9":return u(e,1);case"A":return u(e,2);case"B":return u(e,3);case"C":return u(e,4);case"D":return u(e,5);case"E":return u(e,6);default:return""===e||void 0===e||null===e||n(e)?"":e}}:function(i,a){if(""===i||void 0===i||null===i||n(i))return"";var c,l,d=i,f=i<0,i=Math.abs(i);switch(f?s===!0?(c="(",l=")"):(c="-",l=""):(c="",l=""),a){case"2":return[c,o(i),t,e(8*(i-Math.floor(i)),1),l].join("");case"3":return[c,o(i),t,e(16*(i-Math.floor(i)),2),l].join("");case"4":return[c,o(i),t,e(32*(i-Math.floor(i)),2),l].join("");case"5":return[c,o(i),t,e((i-Math.floor(i))*(r?320:64),r?3:2),l].join("");case"6":return[c,o(i),t,e((i-Math.floor(i))*(r?320:128),3),l].join("");case"7":return[c,o(i),t,e((i-Math.floor(i))*(r?320:256),3),l].join("");case"8":return u(d,0);case"9":return u(d,1);case"A":return u(d,2);case"B":return u(d,3);case"C":return u(d,4);case"D":return u(d,5);case"E":return u(d,6);default:return d}},{format:c}}}()},{"./decimalFormatter":34,"lodash.isnan":48}],39:[function(e,t,r){t.exports=function(){"use strict";function e(e){return t.hasOwnProperty(e)||(t[e]=new RegExp(e,"g")),t[e]}var t={};return function(t,r,n){if(!(t.length<1)){if("-"===t)return null;if(n&&(t=t.replace(e(n),"")),!(t.indexOf(".")<0))return parseFloat(t);var i="-"==t.substr(0,1)?-1:1;switch(i===-1&&(t=t.substr(1)),r){case"2":return i*((t.length>1?parseInt(t.substr(0,t.length-1)):0)+parseInt(t.substr(-1))/8);case"3":return i*((t.length>2?parseInt(t.substr(0,t.length-2)):0)+parseInt(t.substr(-2))/16);case"4":return i*((t.length>2?parseInt(t.substr(0,t.length-2)):0)+parseInt(t.substr(-2))/32);case"5":return i*((t.length>2?parseInt(t.substr(0,t.length-2)):0)+parseInt(t.substr(-2))/64);case"6":return i*((t.length>3?parseInt(t.substr(0,t.length-3)):0)+parseInt(t.substr(-3))/128);case"7":return i*((t.length>3?parseInt(t.substr(0,t.length-3)):0)+parseInt(t.substr(-3))/256);case"8":return i*parseInt(t);case"9":return i*(parseInt(t)/10);case"A":return i*(parseInt(t)/100);case"B":return i*(parseInt(t)/1e3);case"C":return i*(parseInt(t)/1e4);case"D":return i*(parseInt(t)/1e5);case"E":return i*(parseInt(t)/1e6);default:return i*parseInt(t)}}}}()},{}],40:[function(e,t,r){t.exports=function(){"use strict";return{format:function(e){var t;return t=null!==e&&"string"==typeof e?e.toUpperCase():e}}}()},{}],41:[function(e,t,r){t.exports=function(){"use strict";var e=/^(.*)\\.([A-Z]{1,4})$/i,t=/(.{1,3})([A-Z]{1})([0-9]{3}|[0-9]{1})?([0-9]{1})$/i,r=/^(.{1,3})([A-Z]{1})([0-9]{4}|[0-9]{1,2})$/i,n=/^(.{1,3})(\*{1})([0-9]{1})$/i,i=/^_S_/i,a=/^\^([A-Z]{3})([A-Z]{3})$/i,s=/^\-(.*)$/i,o=/^\$(.*)$/i,u=/^(.*)\.BZ$/i,c=/(\.RT)$/,l={parseInstrumentType:function(t){if("string"!=typeof t)return null;var u=t.match(e);if(null!==u&&(t=u[1]),i.test(t))return{symbol:t,type:"future_spread"};var c=t.match(r);if(null!==c){var l=new Date,d=l.getFullYear(),f=c[3],m=parseInt(f);if(m<10)m=10*Math.floor(d/10)+m;else if(m<100&&(m=100*Math.floor(d/100)+m,m<d)){var p=m+100;d-m>p-d&&(m=p)}return{symbol:t,type:"future",root:c[1],dynamic:!1,month:c[2],year:m}}var v=t.match(n);if(null!==v)return{symbol:t,type:"future",root:v[1],dynamic:!0,dynamicCode:v[3]};var h=t.match(a);if(null!==h)return{symbol:t,type:"forex"};var b=t.match(o);if(null!==b)return{symbol:t,type:"index"};var g=t.match(s);return null!==g?{symbol:t,type:"sector"}:null},getIsConcrete:function(e){return!this.getIsReference(e)},getIsReference:function(e){return n.test(e)},getIsFuture:function(e){return d(e,"future")},getIsFutureSpread:function(e){return d(e,"future_spread")},getIsForex:function(e){return d(e,"forex")},getIsSector:function(e){return d(e,"sector")},getIsIndex:function(e){return d(e,"index")},getIsBats:function(e){return u.test(e)},getProducerSymbol:function(e){var r;return r="string"==typeof e?e.replace(t,"$1$2$4"):null},displayUsingPercent:function(e){return c.test(e)}},d=function(e,t){var r=l.parseInstrumentType(e);return null!==r&&r.type===t};return l}()},{}],42:[function(e,t,r){t.exports=function(){"use strict";function e(e){var t,r=e.getHours();return 0===r?(r=12,t="AM"):12===r?(r=r,t="PM"):r>12?(r-=12,t="PM"):(r=r,t="AM"),i(r)+":"+i(e.getMinutes())+":"+i(e.getSeconds())+" "+t}function t(e){var t,r=e.getHours();return 0===r?(r=12,t="A"):12===r?(r=r,t="P"):r>12?(r-=12,t="P"):(r=r,t="A"),i(r)+":"+i(e.getMinutes())+t}function r(e){return i(e.getHours())+":"+i(e.getMinutes())+":"+i(e.getSeconds())}function n(e){return i(e.getHours())+":"+i(e.getMinutes())}function i(e){return("00"+e).substr(-2)}return function(a,s){var o;o=a?s?t:e:s?n:r;var u={format:function(e){var t=e.time;return t?!e.lastPrice||e.flag||e.sessionT?u.formatDate(t):u.formatTime(t,e.timezone):""},formatTime:function(e,t){var r;return e?(r=o(e),t&&(r=r+" "+t)):r="",r},formatDate:function(e){return e?i(e.getMonth()+1)+"/"+i(e.getDate())+"/"+i(e.getFullYear()):""}};return u}}()},{}],43:[function(e,t,r){t.exports=function(){"use strict";return function(e){if(9!==e.length)return null;var t=100*e.charCodeAt(0)+e.charCodeAt(1)-64,r=e.charCodeAt(2)-64-1,n=e.charCodeAt(3)-64,i=e.charCodeAt(4)-64,a=e.charCodeAt(5)-64,s=e.charCodeAt(6)-64,o=(255&e.charCodeAt(7))+((255&e.charCodeAt(8))<<8);return new Date(t,r,n,i,a,s,o)}}()},{}],44:[function(e,t,r){!function(){var e=!1,r=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(t){function n(){!e&&this.init&&this.init.apply(this,arguments)}var i=this.prototype;e=!0;var a=new this;e=!1;for(var s in t)a[s]="function"==typeof t[s]&&"function"==typeof i[s]&&r.test(t[s])?function(e,t){return function(){var r=this._super;this._super=i[e];var n=t.apply(this,arguments);return this._super=r,n}}(s,t[s]):t[s];return n.prototype=a,n.prototype.constructor=n,n.extend=arguments.callee,n},t.exports=Class}()},{}],45:[function(e,t,r){function n(e,t,r){if(!o(t))throw new TypeError("iterator must be a function");arguments.length<3&&(r=this),"[object Array]"===u.call(e)?i(e,t,r):"string"==typeof e?a(e,t,r):s(e,t,r)}function i(e,t,r){for(var n=0,i=e.length;n<i;n++)c.call(e,n)&&t.call(r,e[n],n,e)}function a(e,t,r){for(var n=0,i=e.length;n<i;n++)t.call(r,e.charAt(n),n,e)}function s(e,t,r){for(var n in e)c.call(e,n)&&t.call(r,e[n],n,e)}var o=e("is-function");t.exports=n;var u=Object.prototype.toString,c=Object.prototype.hasOwnProperty},{"is-function":47}],46:[function(e,t,r){(function(e){"undefined"!=typeof window?t.exports=window:"undefined"!=typeof e?t.exports=e:"undefined"!=typeof self?t.exports=self:t.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],47:[function(e,t,r){function n(e){var t=i.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}t.exports=n;var i=Object.prototype.toString},{}],48:[function(e,t,r){function n(e){return!!e&&"object"==typeof e}function i(e){return a(e)&&e!=+e}function a(e){return"number"==typeof e||n(e)&&u.call(e)==s}var s="[object Number]",o=Object.prototype,u=o.toString;t.exports=i},{}],49:[function(e,t,r){var n=e("trim"),i=e("for-each"),a=function(e){return"[object Array]"===Object.prototype.toString.call(e)};t.exports=function(e){if(!e)return{};var t={};return i(n(e).split("\n"),function(e){var r=e.indexOf(":"),i=n(e.slice(0,r)).toLowerCase(),s=n(e.slice(r+1));"undefined"==typeof t[i]?t[i]=s:a(t[i])?t[i].push(s):t[i]=[t[i],s]}),t}},{"for-each":45,trim:50}],50:[function(e,t,r){function n(e){return e.replace(/^\s*|\s*$/g,"")}r=t.exports=n,r.left=function(e){return e.replace(/^\s*/,"")},r.right=function(e){return e.replace(/\s*$/,"")}},{}],51:[function(e,t,r){"use strict";function n(e,t){for(var r=0;r<e.length;r++)t(e[r])}function i(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function a(e,t,r){var n=e;return d(t)?(r=t,"string"==typeof e&&(n={uri:e})):n=m(t,{uri:e}),n.callback=r,n}function s(e,t,r){return t=a(e,t,r),o(t)}function o(e){function t(){4===l.readyState&&a()}function r(){var e=void 0;if(e=l.response?l.response:l.responseText||u(l),y)try{e=JSON.parse(e)}catch(t){}return e}function n(e){return clearTimeout(p),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,c(e,k)}function a(){if(!m){var t;clearTimeout(p),t=e.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var n=k,i=null;return 0!==t?(n={body:r(),statusCode:t,method:h,headers:{},url:v,rawRequest:l},l.getAllResponseHeaders&&(n.headers=f(l.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),c(i,n,n.body)}}if("undefined"==typeof e.callback)throw new Error("callback argument missing");var o=!1,c=function(t,r,n){o||(o=!0,e.callback(t,r,n))},l=e.xhr||null;l||(l=e.cors||e.useXDR?new s.XDomainRequest:new s.XMLHttpRequest);var d,m,p,v=l.url=e.uri||e.url,h=l.method=e.method||"GET",b=e.body||e.data||null,g=l.headers=e.headers||{},P=!!e.sync,y=!1,k={body:void 0,headers:{},statusCode:0,method:h,url:v,rawRequest:l};if("json"in e&&e.json!==!1&&(y=!0,g.accept||g.Accept||(g.Accept="application/json"),"GET"!==h&&"HEAD"!==h&&(g["content-type"]||g["Content-Type"]||(g["Content-Type"]="application/json"),b=JSON.stringify(e.json===!0?b:e.json))),l.onreadystatechange=t,l.onload=a,l.onerror=n,l.onprogress=function(){},l.onabort=function(){m=!0},l.ontimeout=n,l.open(h,v,!P,e.username,e.password),P||(l.withCredentials=!!e.withCredentials),!P&&e.timeout>0&&(p=setTimeout(function(){if(!m){m=!0,l.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",n(e)}},e.timeout)),l.setRequestHeader)for(d in g)g.hasOwnProperty(d)&&l.setRequestHeader(d,g[d]);else if(e.headers&&!i(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(l),l.send(b),l}function u(e){if("document"===e.responseType)return e.responseXML;var t=204===e.status&&e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}function c(){}var l=e("global/window"),d=e("is-function"),f=e("parse-headers"),m=e("xtend");t.exports=s,s.XMLHttpRequest=l.XMLHttpRequest||c,s.XDomainRequest="withCredentials"in new s.XMLHttpRequest?s.XMLHttpRequest:l.XDomainRequest,n(["get","put","post","patch","head","delete"],function(e){s["delete"===e?"del":e]=function(t,r,n){return r=a(t,r,n),r.method=e.toUpperCase(),o(r)}})},{"global/window":46,"is-function":47,"parse-headers":49,xtend:52}],52:[function(e,t,r){function n(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var n in r)i.call(r,n)&&(e[n]=r[n])}return e}t.exports=n;var i=Object.prototype.hasOwnProperty},{}]},{},[12])(12)});